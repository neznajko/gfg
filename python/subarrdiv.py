########################################################
########################################################
########################################################
###==....                             ##################
##==....   ||||||||||||||||||||||||||| #################
#==....   |                           | ################
##==....   ||||||||||||   |||||||||||| #################
###==....             |   |||||||||||| #################
############==....   |               | #################
##########==....   ||   ||||||||||   | #################
########==....   ||   ||        |   | ##################
######==....   ||   ||   ..   ||   | ###################
###==....   |||   ||   ..   ||   || ####################
##==....   |   |||   ..  |||   ||  #####################
###==....   |||    ...  |   |||  #######################
####==....        =....  |||   #########################
#################==....     ############################
########################################################
########################################################
########################################################
########################################################
########################################################
########################################################
########################################################
# Longest subarray with sum divisible by K
########################################################
# Given an array containing N integers and a positive integer
# K, find the length of the longest sub array with sum of
# the elements divisible by the given value K.
########################################################
# Input: A[] = {2, 7, 6, 1, 4, 5} K = 3
# Output: 4
# Explanation: The subarray is {7, 6, 1, 4} with sum 18,
# which is divisible by 3.
########################################################
# Expected Time Complexity: O(N)
# Expected Auxiliary Space: O(N)
########################################################
########################################################
#######################################################_
#  2  7  6  1  4  5 arr
#  2  9 15 16 20 25 prefix sum
#  2  0  0  1  2  1 mod k
#  ^           ^
#  0  1  2  3  4  5 offsets
########################################################
class Solution:
    def longSubarrWthSumDivByK( self, arr, n, k ):
        offsets = [[] for _ in range( k )]
        prefix = 0
        offsets[prefix].append( -1 )
        maxdif = 0
        for j in range( n ):
            prefix += arr[j]
            prefix %= k
            off = offsets[prefix]
            off.append( j )
            dif = off[-1] - off[0]
            if maxdif < dif: maxdif = dif
        return maxdif
########################################################
########################################################
########################################################
########################################################
if __name__ == '__main__': #############################
    for _ in range(0,int(input())): ####################
        n, K = map(int ,input().split()) ###############
        arr = list(map(int,input().strip().split())) ###
        ob = Solution() ################################
        res = ob.longSubarrWthSumDivByK(arr, n, K) #####
        print(res) #####################################
########################################################
########################################################
########################################################
########################################################
#　アメリカ　アメリカ　アメリカ　アメリカ　アメリカ　アメリカ
#　イギリス　イギリス　イギリス　イギリス　イギリス　イギリス
#　オーストラリア　オーストラリア　オーストラリア　オーストラリア
#　かんこく　かんこく　かんこく　かんこく　かんこく　かんこく
#　スウエーデン　スウエーデン　スウエーデン　スウエーデン
#　ちゅうごく　ちゅうごく　ちゅうごく　ちゅうごく　ちゅうごく
########################################################
########################################################
########################################################
########################################################
# Test Cases Passed:                           205 / 205
# Your Total Score:                                 1302
# Total Time Taken:                                 0.91
# Correct Submission Count:                            2
